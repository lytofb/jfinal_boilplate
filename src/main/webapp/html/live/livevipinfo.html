<#include "/html/common/_layout.html"/>
<#function transformstatus x>
    <#if x == "open">
        <#return "已开启">
    </#if>
    <#if x == "close">
        <#return "已关闭">
    </#if>
    <#if x == "suspend">
        <#return "暂停中">
    </#if>
    <#if x == "live">
        <#return "直播中">
    </#if>
</#function>

<@layout>
<!-- Matter -->

<div class="matter">
    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <label>会员名称：</label>
                <input type="text" id="user_name" class="entersearch" value="${user_name!''}">
            </div>
            <!--<div class="col-md-3">-->
                <!--<label>会员卡号：</label>-->
                <!--<input type="text" id="vipcardid" class="entersearch" value="${vipcardid!''}">-->
            <!--</div>-->
            <!--<div class="col-md-6">-->
                <!--<label>旧会员卡号：</label>-->
                <!--<input type="text" id="oldcardid" class="entersearch" value="${oldcardid!''}">-->
            <!--</div>-->
        </div>
        <div class="row">

            <div class="col-md-12">
                <div class="widget">

                    <div class="widget-head">
                        <div class="pull-left">会员信息</div>
                        <div class="widget-icons pull-right">
                            <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
                        </div>
                        <div class="clearfix"></div>
                    </div>

                    <div class="widget-content">

                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th>帐号</th>
                                <th>名称</th>
                                <th>直播频道</th>
                                <th>创建时间</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            <#list page.list as vip>
                            <tr>
                                <td>${vip_index + 1}.</td>
                                <td>${(vip.user_account)!""}</td>
                                <td>${(vip.user_name)!""}</td>
                                <th>${transformstatus(vip.channel_status)}</th>
                                <td>${vip.updatetime?string('yyyy-MM-dd HH:mm:ss')}</td>
                                <td><button class="btn btn-xs btn-default vipdetail" useraccount="${vip.user_account}"><i class="fa fa-eye"></i> </button></td>
                            </tr>
                            </#list>
                            </tbody>
                        </table>

                        <div class="widget-foot">


                            <#if page?? && page.list?size gt 0>
                                <@paginate currentPage=page.pageNumber totalPage=page.totalPage actionUrl="${base_path}/live/listliveuser" urlParas=_urlParas className="pagination pull-right"/>
                            </#if>

                            <div class="clearfix"></div>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</@layout>
<@script>
<script type="text/javascript">
    var dosearch = function (){
        var urlbase = "${base_path}/live/listliveuser";
        var url = urlbase.concat("?vipname=",$("#user_name").val())
        location.href=url;
    }
    $(function(){
        $(".entersearch").keypress(function(event){
            var keycode = event.which;
            if(keycode ==13){
                dosearch();
            }
        })
        $(".vipdetail").click(function(){
            var userAccount = $(this).attr("useraccount");
            commonPost("${base_path}/live/openChannel",setMessageSuccess,defaultFailCallback,null,{"user_account":userAccount},true)
            location.href="${base_path}/live/listliveuser";
        })
    })
</script>
</@script>